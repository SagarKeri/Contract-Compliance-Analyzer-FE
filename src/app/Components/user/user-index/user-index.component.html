<div class="card shadow-lg mb-5 border-0 m-5">
  <div
    class="card-header bg-secondary d-flex justify-content-between align-items-center"
  >
    <h5 class="mb-0 text-white fw-bold">User List</h5>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0 table-bordered">
        <thead class="table-light">
          <tr>
            <th style="width: 70px" class="border-end">S. No</th>
            <th class="border-end">First Name</th>
            <th class="border-end">Last Name</th>
            <th class="border-end">Email</th>
            <th class="border-end text-center">Admin</th>
            <th class="border-end text-center">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="
              let user of users
                | paginate : { itemsPerPage: itemsPerPage, currentPage: page };
              let i = index
            "
          >
            <td class="fw-medium border-end">
              {{ i + 1 + (page - 1) * itemsPerPage }}
            </td>
            <td class="fw-semibold">{{ user.first_name }}</td>
            <td class="fw-semibold">{{ user.last_name }}</td>
            <td class="fw-semibold">{{ user.email }}</td>
            <td class="fw-semibold text-center">
              <div class="form-check form-switch d-flex justify-content-center">
                <input
                  class="form-check-input"
                  type="checkbox"
                  [checked]="user.role_id === 1"
                  (change)="toggleRole(user)"
                />
              </div>
            </td>
            <td class="text-center">
              <button
                class="btn btn-sm btn-outline-danger"
                 data-bs-toggle="modal" data-bs-target="#confirmModal"
                (click)="openDeleteDialog(user._id||'')"
              >
                <i class="bi bi-trash-fill"></i>
              </button>
            </td>
          </tr>

          <tr *ngIf="users.length === 0">
            <td colspan="6" class="text-center py-4 text-muted">
              <i class="bi bi-emoji-frown me-1"></i> No users found.
            </td>
          </tr>
        </tbody>
      </table>

      <div class="mt-3 d-flex justify-content-center">
        <pagination-controls (pageChange)="page = $event"></pagination-controls>
      </div>
    </div>
  </div>
</div>

<app-confirm-dialog
  [title]="'Delete User'"
  [message]="'Are you sure you want to delete this user?'"
  [confirmText]="'Delete'"
  [cancelText]="'Cancel'"
  [show]="showConfirmDialog"
  (confirmed)="deleteUser(selectedUserId||'')"
  (cancelled)="closeDialog()"
>
</app-confirm-dialog>
